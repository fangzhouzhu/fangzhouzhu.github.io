import{d as E,N as U,a as q,P as W,b as j,c as M,e as O,f as $,g as I,h as G,u as z,r as v,i as H,o as K,w as J,j as h,k,l as Q,m,t as X,n as s,p as g,F as Y,q as L,s as Z,v as ee,x as ae,y as ne}from"./vendor.0bf042b5.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}};te();var oe="./assets/Walk Thru Fire.df408fc4.mp3",c,r,B,b,w;const R=function(a,e,t,u,n){c=document.getElementById(a),r=c.getContext("2d"),b=t,B=u,w=n,e=="line"?V():D()};function V(){requestAnimationFrame(V),B.getByteTimeDomainData(b),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,c.width,c.height),r.lineWidth=2,r.strokeStyle="rgb(24, 160, 88)",r.beginPath();for(var a=c.width*1/w,e=0,t=0;t<w;t++){var u=b[t]/128,n=u*c.height/2;t===0?r.moveTo(e,n):r.lineTo(e,n),e+=a}r.stroke()}function D(){requestAnimationFrame(D),B.getByteFrequencyData(b),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,c.width,c.height),r.fillStyle="rgb(24, 160, 88)";for(var a=c.width/w*2.5,e=0,t=0;t<w;t++){let u=b[t];r.fillRect(e,c.height-u/2,10,u/2),e+=a+1}}var ue=(a,e)=>{for(const[t,u]of e)a[t]=u;return a};const le=E({components:{NButton:U,NIcon:q,Play:W,Pause:j,NSlider:M,NSpace:O,NUpload:$,NRadioGroup:I,NRadioButton:G},props:{msg:{type:String,default:""}},setup(a){const e=z(),t=v(!0),u=v(50),n=v(1200),l=v(""),d=v("line");l.value=oe;const A=v(0),C=v(),p=v(),i=H({}),o=v({analyser:{},dataArray:[],bufferLength:0});function f(){t.value?p.value.play():p.value.pause(),t.value=!t.value}function S(){R("audioCanvas",d.value,o.value.dataArray,o.value.analyser,o.value.bufferLength)}function T(){if(i.value)return;i.value=new AudioContext;const F=i.value.createMediaElementSource(p.value),y=i.value.createGain(),_=i.value.createPanner(),N=i.value.createBiquadFilter();y.gain.value=u.value,o.value.analyser=i.value.createAnalyser(),o.value.analyser.fftSize=256,o.value.bufferLength=o.value.analyser.frequencyBinCount,o.value.dataArray=new Uint8Array(o.value.bufferLength),o.value.analyser.getByteTimeDomainData(o.value.dataArray),F.connect(y).connect(_).connect(N).connect(o.value.analyser).connect(i.value.destination),R("audioCanvas",d.value,o.value.dataArray,o.value.analyser,o.value.bufferLength),J(()=>{y.gain.value=u.value/100,N.frequency.value=n.value,_.setPosition(A.value,0,0)})}function x(F){if(!!F.fileList.length){var y=F.fileList[0].file;l.value=URL.createObjectURL(new Blob([y]));var _=new FileReader;_.readAsArrayBuffer(y),_.onload=function(N){i.value.decodeAudioData(N.target.result,function(P){C.value=P,T(),p.value.play()})}}}return K(async()=>{if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext){e.error("\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301Web Audio API");return}p.value.addEventListener("play",function(){T()})}),{play:t,audioRef:p,audioUrl:l,toogle:f,gainValue:u,filterValue:n,pannerValue:A,fileChange:x,showType:d,showTypeChange:S}}}),re=L("line"),ie=L("bar"),se=m("canvas",{id:"audioCanvas",width:"1000",height:"300"},null,-1),de=L("\u9009\u62E9 \u6587\u4EF6"),ce=["src"],fe=m("span",null,"\u97F3\u91CF",-1),ve=m("span",null,"\u4F4E\u9636\u6EE4\u6CE2\u5668",-1),pe=m("span",null,"\u7A7A\u95F4\u97F3\u6548",-1);function ge(a,e,t,u,n,l){const d=h("n-radio-button"),A=h("n-radio-group"),C=h("n-space"),p=h("n-button"),i=h("n-upload"),o=h("n-slider");return k(),Q(Y,null,[m("h1",null,X(a.msg),1),s(A,{value:a.showType,"onUpdate:value":e[0]||(e[0]=f=>a.showType=f),onChange:a.showTypeChange},{default:g(()=>[s(d,{value:"line"},{default:g(()=>[re]),_:1}),s(d,{value:"bar"},{default:g(()=>[ie]),_:1})]),_:1},8,["value","onChange"]),s(C,{justify:"center"},{default:g(()=>[se]),_:1}),s(i,{action:"/",onChange:a.fileChange,"default-upload":!1,max:1},{default:g(()=>[s(p,null,{default:g(()=>[de]),_:1})]),_:1},8,["onChange"]),m("audio",{src:a.audioUrl,controls:"",ref:"audioRef",id:"audioRef"},null,8,ce),s(C,{style:{height:"300px","justify-content":"center"}},{default:g(()=>[fe,s(o,{value:a.gainValue,"onUpdate:value":e[1]||(e[1]=f=>a.gainValue=f),step:1,min:0,max:100,vertical:""},null,8,["value"]),ve,s(o,{value:a.filterValue,"onUpdate:value":e[2]||(e[2]=f=>a.filterValue=f),step:1,min:0,max:2400,vertical:""},null,8,["value"]),pe,s(o,{value:a.pannerValue,"onUpdate:value":e[3]||(e[3]=f=>a.pannerValue=f),step:1,max:10,min:-10,vertical:""},null,8,["value"])]),_:1})],64)}var ye=ue(le,[["render",ge]]);const he=E({setup(a){return(e,t)=>(k(),Z(ee(ae),null,{default:g(()=>[s(ye,{msg:"Web Tuning Tool"})]),_:1}))}});ne(he).mount("#app");
